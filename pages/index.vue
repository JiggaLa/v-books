<script>
export default {
  data() {
    return {
      popularBooksISBNs: [
        'ISBN:0758203322',
        'ISBN:0743292332',
        'ISBN:039914563X',
        'ISBN:0553276328',
        'ISBN:067942525X',
        'ISBN:0553591738',
      ],
      popularBooks: undefined,
    }
  },

  fetch() {
    const openLibraryAPIUrl = `https://openlibrary.org/api/books?bibkeys=${this.popularBooksISBNs}&format=json&jscmd=data`

    this.$axios
      .get(openLibraryAPIUrl)
      .then((res) => {
        this.popularBooks = res.data
        console.log(res.data)
      })
      .catch((err) => {
        console.error(err)
      })
  },

  fetchOnServer: false,
}
</script>

<template>
  <main class="container">
    <section
      class="
        relative
        flex flex-col
        items-center
        w-full
        mb-16
        min-h-[100vh]
        2xl:min-h-[auto]
      "
    >
      <Header />

      <div
        class="
          absolute
          w-[800px]
          h-[800px]
          mt-[-13%]
          rounded-[50%]
          bg-[#f8e6e5]
          blur-[200px]
          lg:mr-0 lg:mt-[-17%]
          md:mt-[-40%]
        "
      ></div>

      <img
        src="~assets/img/book_mockup.png"
        alt="book-mockup"
        class="book-mockup"
      />

      <div class="hero-content">
        <svg
          width="541"
          viewBox="0 0 541 451"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="mt-[149px] lg:mt-[39%] md:mt-[54%] max-w-full"
        >
          <path
            d="M178.428 61.436C201.756 61.436 221.628 69.644 238.044 86.06C254.46 102.26 262.668 122.24 262.668 146C262.668 169.76 254.46 189.848 238.044 206.264C221.628 222.464 201.756 230.564 178.428 230.564C161.796 230.564 147 226.352 134.04 217.928C121.08 209.504 111.252 198.164 104.556 183.908V227H92.892V0.199951H104.556V108.092C111.252 93.836 121.08 82.496 134.04 74.072C147 65.648 161.796 61.436 178.428 61.436ZM125.616 198.488C139.872 212.528 157.26 219.548 177.78 219.548C198.3 219.548 215.58 212.528 229.62 198.488C243.876 184.232 251.004 166.736 251.004 146C251.004 125.264 243.876 107.876 229.62 93.836C215.58 79.58 198.3 72.452 177.78 72.452C157.26 72.452 139.872 79.58 125.616 93.836C111.576 107.876 104.556 125.264 104.556 146C104.556 166.736 111.576 184.232 125.616 198.488Z"
            fill="black"
          />
          <path
            d="M377.468 230.564C353.924 230.564 333.944 222.464 317.528 206.264C301.112 189.848 292.904 169.76 292.904 146C292.904 122.24 301.112 102.26 317.528 86.06C333.944 69.644 353.924 61.436 377.468 61.436C401.228 61.436 421.316 69.644 437.732 86.06C454.148 102.26 462.356 122.24 462.356 146C462.356 169.76 454.148 189.848 437.732 206.264C421.316 222.464 401.228 230.564 377.468 230.564ZM325.304 198.488C339.56 212.528 356.948 219.548 377.468 219.548C397.988 219.548 415.376 212.528 429.632 198.488C443.888 184.232 451.016 166.736 451.016 146C451.016 125.264 443.888 107.876 429.632 93.836C415.376 79.58 397.988 72.452 377.468 72.452C356.948 72.452 339.56 79.58 325.304 93.836C311.264 107.876 304.244 125.264 304.244 146C304.244 166.736 311.264 184.232 325.304 198.488Z"
            fill="black"
          />
          <path
            d="M165.792 450.564C142.248 450.564 122.268 442.464 105.852 426.264C89.436 409.848 81.228 389.76 81.228 366C81.228 342.24 89.436 322.26 105.852 306.06C122.268 289.644 142.248 281.436 165.792 281.436C189.552 281.436 209.64 289.644 226.056 306.06C242.472 322.26 250.68 342.24 250.68 366C250.68 389.76 242.472 409.848 226.056 426.264C209.64 442.464 189.552 450.564 165.792 450.564ZM113.628 418.488C127.884 432.528 145.272 439.548 165.792 439.548C186.312 439.548 203.7 432.528 217.956 418.488C232.212 404.232 239.34 386.736 239.34 366C239.34 345.264 232.212 327.876 217.956 313.836C203.7 299.58 186.312 292.452 165.792 292.452C145.272 292.452 127.884 299.58 113.628 313.836C99.588 327.876 92.568 345.264 92.568 366C92.568 386.736 99.588 404.232 113.628 418.488Z"
            fill="black"
          />
          <path
            d="M410.149 447H394.597L304.525 366.324V447H292.861V220.2H304.525V359.52L391.357 285H406.909L316.513 362.76L410.149 447Z"
            fill="black"
          />
          <path
            d="M438.544 327.12C438.544 335.76 442 342.564 448.912 347.532C456.04 352.284 464.572 355.848 474.508 358.224C484.444 360.384 494.38 362.76 504.316 365.352C514.252 367.944 522.676 372.48 529.588 378.96C536.716 385.224 540.28 393.756 540.28 404.556C540.28 417.732 534.88 428.748 524.08 437.604C513.496 446.244 499.78 450.564 482.932 450.564C450.964 450.564 430.66 438.792 422.02 415.248L431.416 409.74C438.112 429.612 455.284 439.548 482.932 439.548C496.108 439.548 507.016 436.416 515.656 430.152C524.296 423.672 528.616 415.14 528.616 404.556C528.616 395.7 525.052 388.788 517.924 383.82C511.012 378.852 502.588 375.288 492.652 373.128C482.716 370.752 472.78 368.268 462.844 365.676C452.908 363.084 444.376 358.656 437.248 352.392C430.336 346.128 426.88 337.704 426.88 327.12C426.88 314.16 431.848 303.36 441.784 294.72C451.936 285.864 465.22 281.436 481.636 281.436C494.38 281.436 505.396 284.352 514.684 290.184C524.188 295.8 530.992 303.468 535.096 313.188L525.7 318.696C522.244 310.272 516.628 303.792 508.852 299.256C501.076 294.72 492.004 292.452 481.636 292.452C469.108 292.452 458.74 295.692 450.532 302.172C442.54 308.436 438.544 316.752 438.544 327.12Z"
            fill="black"
          />
          <path
            d="M2.00008 191.224L2.00008 183.14L45.0001 200.34V209.112L2.00008 226.312L2.00008 218.228L37.0021 204.726L2.00008 191.224Z"
            fill="black"
          />
          <path
            d="M26.9401 173.246C30.7814 172.501 33.7627 170.752 35.8841 168C38.0054 165.191 39.0661 161.751 39.0661 157.68C39.0661 152.004 36.9734 147.876 32.7881 145.296L36.4001 138.932C42.8787 143.117 46.1181 149.424 46.1181 157.852C46.1181 164.675 43.9967 170.236 39.7541 174.536C35.4541 178.779 30.0361 180.9 23.5001 180.9C17.0214 180.9 11.6321 178.807 7.33208 174.622C3.03208 170.437 0.88208 165.019 0.88208 158.368C0.88208 152.061 3.11808 146.93 7.59008 142.974C12.0047 138.961 17.3367 136.954 23.5861 136.954C24.6754 136.954 25.7934 137.04 26.9401 137.212L26.9401 173.246ZM7.93408 158.368C7.93408 162.381 9.08074 165.707 11.3741 168.344C13.6101 170.981 16.6201 172.615 20.4041 173.246V144.522C16.3334 145.153 13.2374 146.758 11.1161 149.338C8.99474 151.918 7.93408 154.928 7.93408 158.368Z"
            fill="black"
          />
          <path
            d="M9.22408 120.871C3.89208 118.406 1.22608 113.934 1.22608 107.455H9.05208C8.88008 111.125 9.85474 114.278 11.9761 116.915C14.0974 119.553 17.5087 120.871 22.2101 120.871H45.0001V128.353H2.00008V120.871H9.22408Z"
            fill="black"
          />
          <path
            d="M13.6101 95.2803C15.2727 95.2803 16.6201 94.4489 17.6521 92.7863C18.6267 91.1236 19.4294 89.1169 20.0601 86.7663C20.6334 84.4156 21.3214 82.0649 22.1241 79.7143C22.8694 77.3636 24.1881 75.3569 26.0801 73.6943C27.9147 72.0316 30.2941 71.2003 33.2181 71.2003C37.1167 71.2003 40.2414 72.7196 42.5921 75.7583C44.9427 78.7396 46.1181 82.5809 46.1181 87.2823C46.1181 91.4676 45.2007 95.0509 43.3661 98.0323C41.5314 101.014 39.0947 103.135 36.0561 104.396L32.3581 97.9463C34.4221 97.2583 36.0561 95.9683 37.2601 94.0763C38.4641 92.1843 39.0661 89.9196 39.0661 87.2823C39.0661 84.8169 38.6074 82.7816 37.6901 81.1763C36.7154 79.5709 35.2247 78.7683 33.2181 78.7683C31.5554 78.7683 30.2367 79.5996 29.2621 81.2623C28.2301 82.9249 27.4274 84.9316 26.8541 87.2823C26.2234 89.6329 25.5067 91.9836 24.7041 94.3343C23.9014 96.6849 22.5827 98.6916 20.7481 100.354C18.9134 102.017 16.5627 102.848 13.6961 102.848C9.96941 102.848 6.90208 101.415 4.49408 98.5483C2.08608 95.6243 0.88208 91.9836 0.88208 87.6263C0.88208 84.1289 1.68474 81.0329 3.29008 78.3383C4.83808 75.5863 7.01675 73.5223 9.82608 72.1463L13.3521 78.4243C9.68275 79.9723 7.84808 83.0396 7.84808 87.6263C7.84808 89.7476 8.36408 91.5536 9.39608 93.0443C10.3707 94.5349 11.7754 95.2803 13.6101 95.2803Z"
            fill="black"
          />
          <path
            d="M2.00008 27.9134V20.4314H45.0001V27.9134H37.6041C43.2801 31.64 46.1181 37.058 46.1181 44.1674C46.1181 50.1874 43.9394 55.3187 39.5821 59.5614C35.1674 63.804 29.8067 65.9254 23.5001 65.9254C17.1934 65.9254 11.8614 63.804 7.50408 59.5614C3.08941 55.3187 0.88208 50.1874 0.88208 44.1674C0.88208 37.058 3.72008 31.64 9.39608 27.9134H2.00008ZM38.8941 43.2214C38.8941 38.864 37.4321 35.2234 34.5081 32.2994C31.5267 29.3754 27.8574 27.9134 23.5001 27.9134C19.1427 27.9134 15.5021 29.3754 12.5781 32.2994C9.59675 35.2234 8.10608 38.864 8.10608 43.2214C8.10608 47.5214 9.59675 51.1334 12.5781 54.0574C15.5021 56.9814 19.1427 58.4434 23.5001 58.4434C27.8574 58.4434 31.5267 56.9814 34.5081 54.0574C37.4321 51.1334 38.8941 47.5214 38.8941 43.2214Z"
            fill="black"
          />
        </svg>

        <div
          class="w-[600px] mt-[60px] text-2xl leading-8 md:text-xl md:w-full"
        >
          Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
          eiusmod tempor incididunt ut labore et dolore magna aliqua.
        </div>
      </div>
    </section>

    <div
      class="relative z-[2] w-full h-[1px] max-w-[1440px] bg-[#e0e0e0]"
    ></div>

    <div
      class="
        relative
        z-[2]
        w-full
        max-w-[1440px]
        my-16
        px-16
        flex flex-col
        md:px-6
      "
    >
      <div
        class="
          text-[#e9e9ec] text-[16vw]
          leading-[1.1]
          font-bold
          lg:text-[23vw]
          md:text-[20vw]
        "
      >
        Popular
      </div>

      <div
        v-if="$fetchState.pending"
        class="w-full h-[50vh] flex justify-center items-center"
      >
        <SkChase />
      </div>

      <div v-else class="books-grid">
        <!-- BookItem Component looped and book passed to child using props -->
        <BookItem
          v-for="book in popularBooks"
          :key="book.key"
          :title="book.title"
          :authors="book.authors"
          :cover-url="book.cover.large"
          :isbn="book.identifiers.isbn_10[0]"
        />
      </div>
    </div>

    <Footer />
  </main>
</template>



<style lang="scss" scoped>
.book-mockup {
  @apply absolute left-auto right-0 inset-y-0 z-[2] mt-[-11%] mr-[-32%];

  @screen lg {
    @apply max-w-[160%] w-[140%] mt-[-19%] mr-[-38%];
  }

  @screen md {
    @apply w-[160%];
  }
}

.hero-content {
  @apply relative z-[1] w-full max-w-[1440px] pt-6 px-16 flex flex-col items-start;

  @screen md {
    @apply px-6;
  }
}

.books-grid {
  display: -ms-grid;
  display: grid;
  margin-top: 40px;
  justify-content: center;
  align-content: start;
  grid-auto-flow: row;
  grid-auto-columns: minmax(345px, 345px);
  grid-column-gap: 6vw;
  grid-row-gap: 70px;
  -ms-grid-columns: minmax(345px, 345px) minmax(345px, 345px)
    minmax(345px, 345px);
  grid-template-columns: minmax(345px, 345px) minmax(345px, 345px) minmax(
      345px,
      345px
    );
  -ms-grid-rows: auto;
  grid-template-rows: auto;

  @screen xl {
    margin-top: 3%;
    justify-content: center;
    align-content: center;
    grid-auto-columns: minmax(245px, 345px);
    -ms-grid-columns: minmax(245px, 345px) minmax(245px, 345px);
    grid-template-columns: minmax(245px, 345px) minmax(245px, 345px);
  }

  @screen sm {
    grid-auto-columns: minmax(90vw, 90vw);
    grid-row-gap: 60px;
    -ms-grid-columns: minmax(90vw, 90vw);
    grid-template-columns: minmax(90vw, 90vw);
  }
}
</style>
